<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Getting_Started/preparation/vpn" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">VPN | KickstartSelfhostedServices</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lefterisALEX.github.io/kickstart-selfhosted-pages/img/&lt;open-graph-card&gt;"><meta data-rh="true" name="twitter:image" content="https://lefterisALEX.github.io/kickstart-selfhosted-pages/img/&lt;open-graph-card&gt;"><meta data-rh="true" property="og:url" content="https://lefterisALEX.github.io/kickstart-selfhosted-pages/Getting_Started/preparation/vpn"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="VPN | KickstartSelfhostedServices"><meta data-rh="true" name="description" content="We are using Tailscale as a VPN service. Tailscale is mesh VPN network which allows devices to connect securely and directly over the internet, using the WireGuard protocol"><meta data-rh="true" property="og:description" content="We are using Tailscale as a VPN service. Tailscale is mesh VPN network which allows devices to connect securely and directly over the internet, using the WireGuard protocol"><link data-rh="true" rel="icon" href="/kickstart-selfhosted-pages/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lefterisALEX.github.io/kickstart-selfhosted-pages/Getting_Started/preparation/vpn"><link data-rh="true" rel="alternate" href="https://lefterisALEX.github.io/kickstart-selfhosted-pages/Getting_Started/preparation/vpn" hreflang="en"><link data-rh="true" rel="alternate" href="https://lefterisALEX.github.io/kickstart-selfhosted-pages/Getting_Started/preparation/vpn" hreflang="x-default"><link rel="stylesheet" href="/kickstart-selfhosted-pages/assets/css/styles.76118980.css">
<script src="/kickstart-selfhosted-pages/assets/js/runtime~main.3e29fdff.js" defer="defer"></script>
<script src="/kickstart-selfhosted-pages/assets/js/main.84590a14.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/kickstart-selfhosted-pages/"><b class="navbar__title text--truncate">Kickstart Selfhosted Services</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" sidebarid="docsSidebar" href="/kickstart-selfhosted-pages/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lefterisALEX/kickstart-selfhosted-pages" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kickstart-selfhosted-pages/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kickstart-selfhosted-pages/how_it_works">How it works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kickstart-selfhosted-pages/costs">Cloud Costs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/kickstart-selfhosted-pages/category/getting-started">Getting Started</a><button aria-label="Collapse sidebar category &#x27;Getting Started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/kickstart-selfhosted-pages/category/preparation">Preparation</a><button aria-label="Collapse sidebar category &#x27;Preparation&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/kickstart-selfhosted-pages/Getting_Started/preparation/cicd">CICD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/kickstart-selfhosted-pages/Getting_Started/preparation/cloud_provider">Cloud Provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/kickstart-selfhosted-pages/Getting_Started/preparation/vpn">VPN</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/kickstart-selfhosted-pages/Getting_Started/preparation/terraform_state">Terraform State</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/kickstart-selfhosted-pages/Getting_Started/preparation/cloudflare">DNS &amp; TLS certificates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/kickstart-selfhosted-pages/Getting_Started/preparation/external_secrets">External Secrets</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kickstart-selfhosted-pages/Getting_Started/configuration_options">Configuration Options</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kickstart-selfhosted-pages/Getting_Started/deploy">Initial Deploy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kickstart-selfhosted-pages/Getting_Started/add-new-services">Add more services</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kickstart-selfhosted-pages/category/how-to">How to</a><button aria-label="Expand sidebar category &#x27;How to&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kickstart-selfhosted-pages/common-issues">Common Issues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kickstart-selfhosted-pages/faq">FAQ</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/kickstart-selfhosted-pages/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/kickstart-selfhosted-pages/category/getting-started"><span itemprop="name">Getting Started</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/kickstart-selfhosted-pages/category/preparation"><span itemprop="name">Preparation</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">VPN</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>VPN</h1></header>
<p>We are using Tailscale as a VPN service. Tailscale is mesh VPN network which allows devices to connect securely and directly over the internet, using the WireGuard protocol
We are using Tailscale so you can connect your mobile device to the tailscale network, so you can securely access your selfhosted services from anywhere.
You can also connect add a home router to the tailscale so you can allow all devices in your home network to reach the selfhosted services.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="before-you-login">Before you login<a href="#before-you-login" class="hash-link" aria-label="Direct link to Before you login" title="Direct link to Before you login">​</a></h2>
<p>If you want other people to use your services is better to create a <a href="https://docs.github.com/en/organizations/collaborating-with-groups-in-organizations/creating-a-new-organization-from-scratch" target="_blank" rel="noopener noreferrer">github organization</a>, and invite those people in that organization.
That way other people can also connect to your tailscale network , so they can access your services.
You can create a github organization by clicking on your icon in top right corner and select <strong>&quot;Your Organizations&quot;</strong>  and then click on <strong>&quot;New Organization&quot;</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="first-time-login">First time login<a href="#first-time-login" class="hash-link" aria-label="Direct link to First time login" title="Direct link to First time login">​</a></h2>
<p>Login to <a href="https://login.tailscale.com/" target="_blank" rel="noopener noreferrer">tailscale</a> using Github as Identity Provider (select then the organization if you created).<br>
<!-- -->After you login make sure you change the account to <strong>Personal Usage</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="access-control">Access Control<a href="#access-control" class="hash-link" aria-label="Direct link to Access Control" title="Direct link to Access Control">​</a></h2>
<p><strong>Why we need this?</strong><br>
<!-- -->During the bootstrap process of our VPS in Hetzner, we will install the Tailscale client and configure it to join our Tailscale network using a generated API key (will do that later). This setup in addition allows the VPS to advertise specific routes, enabling it to route traffic to specific IP subnets.<br>
<!-- -->In our configuration, the VPS will advertise both the private subnet in Hetzner and the Docker subnet. By default, Tailscale requires manual approval for these advertised routes each time a new device joins the network, so for example each time we replace the VPS. This means that whenever we replace the VPS, we would need to perform this manual step again.
To streamline this process, we can implement auto-approvers in the Access Control settings of Tailscale. This feature allows us to automatically approve certain routes for specific users, eliminating the need for manual intervention each time a new host connects to the Tailscale network. By setting up auto-approvers, we can ensure that the necessary routes are approved seamlessly, enhancing the efficiency of our network management.</p>
<p>Go to tab <code>Access Controls</code> and add the folllowing snippet to auto approve the routes that are advertised by tailscale.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">	&quot;autoApprovers&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&quot;routes&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">			&quot;172.29.016&quot;:    [&quot;username@github&quot;],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">			&quot;192.168.15624&quot;: [&quot;username@github&quot;],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	},</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The default settings of the module we are deploying have:<br>
<!-- -->Docker Network: <code>172.29.016</code><br>
<!-- -->Hetzner Network: <code>192.168.15624</code></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>If you have changed the default subnets for the docker and hetzner network you will need to update the snippet accordingly.<br>
<!-- -->You need also to replace username@github with your username.</p></div></div>
<p><img decoding="async" loading="lazy" src="/kickstart-selfhosted-pages/assets/images/tailscale-acl-75ff40fc810dcdce2bfeb53af2451b15.png" width="1270" height="923" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="generate-auth-key">Generate Auth Key<a href="#generate-auth-key" class="hash-link" aria-label="Direct link to Generate Auth Key" title="Direct link to Generate Auth Key">​</a></h2>
<p>Navigate to <code>Settings -&gt; Personal Settings -&gt; Keys</code> and press <strong>Generate an auth key</strong>.</p>
<p><img decoding="async" loading="lazy" src="/kickstart-selfhosted-pages/assets/images/tailscale-auth-key-87dcfceefca05311c164dd754cdc17cc.png" width="1442" height="828" class="img_ev3q"></p>
<p>In the options choose to be reusable and ephemeral.</p>
<p><img decoding="async" loading="lazy" src="/kickstart-selfhosted-pages/assets/images/tailscale-auth-key-2-f589c337b792c72dc2efb0c3ba33fa94.png" width="1442" height="828" class="img_ev3q"></p>
<p>Store the token as a <a href="/kickstart-selfhosted-pages/Getting_Started/preparation/cicd#github-secret">GitHub secret</a> in your repository under the name <code>TAILSCALE_AUTH_KEY</code></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/kickstart-selfhosted-pages/Getting_Started/preparation/cloud_provider"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Cloud Provider</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/kickstart-selfhosted-pages/Getting_Started/preparation/terraform_state"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Terraform State</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#before-you-login" class="table-of-contents__link toc-highlight">Before you login</a></li><li><a href="#first-time-login" class="table-of-contents__link toc-highlight">First time login</a></li><li><a href="#access-control" class="table-of-contents__link toc-highlight">Access Control</a></li><li><a href="#generate-auth-key" class="table-of-contents__link toc-highlight">Generate Auth Key</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>