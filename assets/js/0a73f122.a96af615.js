"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[543],{689:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/cloudflare-add-domain-7ecaae6aca1feb825d5c84945173d5a2.png"},3071:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/cloudflare-create-token-3-07d67197261228d53affb5b78e68d0ea.png"},3285:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"Preparation/Cloudflare","title":"Cloudflare","description":"The following guide is going though the required preparation steps that you will need before you first run your pipeline to deploy your selfhosted services.","source":"@site/docs/Preparation/Cloudflare.md","sourceDirName":"Preparation","slug":"/Preparation/Cloudflare","permalink":"/kickstart-selfhosted-pages/Preparation/Cloudflare","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"defaultSidebar","previous":{"title":"Infisical","permalink":"/kickstart-selfhosted-pages/Preparation/Infisical"},"next":{"title":"Deploy Cloudstack","permalink":"/kickstart-selfhosted-pages/deploy-cloudstack"}}');var r=t(4848),a=t(8453);const o={sidebar_position:7},i="Cloudflare",d={},l=[{value:"Cloudflare",id:"cloudflare-1",level:2},{value:"Add domain",id:"add-domain",level:3}];function c(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"cloudflare",children:"Cloudflare"})}),"\n",(0,r.jsx)(n.p,{children:"The following guide is going though the required preparation steps that you will need before you first run your pipeline to deploy your selfhosted services."}),"\n",(0,r.jsx)(n.h2,{id:"cloudflare-1",children:"Cloudflare"}),"\n",(0,r.jsx)(n.p,{children:"You will need to have a domain (or subdomain) with an A record pointing to your Private IP of your hetzner server.\nAdditionally LetsEncrypt is managing the rotation of the TLS certificate , using DNS challenge."}),"\n",(0,r.jsx)(n.h3,{id:"add-domain",children:"Add domain"}),"\n",(0,r.jsxs)(n.p,{children:["In the account home page select ",(0,r.jsx)(n.code,{children:"add a domain"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(689).A+"",width:"1270",height:"471"})}),"\n",(0,r.jsxs)(n.p,{children:["And then select to ",(0,r.jsx)(n.strong,{children:"Manually enter DNS records"}),"\n",(0,r.jsx)(n.img,{src:t(8114).A+"",width:"1270",height:"923"})]}),"\n",(0,r.jsxs)(n.p,{children:["Enter an A record to point to the private IP of the virtual machine in Hetzner. The default IP is ",(0,r.jsx)(n.code,{children:"192.168.156.100"})," , if you have changed that you need to set the new IP here.\nRemember to disable the Proxy status to DNS only."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(9230).A+"",width:"1270",height:"923"})}),"\n",(0,r.jsx)(n.p,{children:"You will see now very likely that the domain is pending activation. This is because you have acquired the domain from a different registar and not Cloudflare."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(4213).A+"",width:"1270",height:"923"})}),"\n",(0,r.jsx)(n.p,{children:"You will need to go to your domain registar and update the nameservers to use the Cloudflare Nameservers."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"alexa.ns.cloudflare.com\njack.ns.cloudflare.com\n"})}),"\n",(0,r.jsxs)(n.p,{children:["In the following page you can find information how to change the Nameservers in a list of domain registars.",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.a,{href:"https://developers.cloudflare.com/dns/nameservers/update-nameservers/#your-domain-uses-a-different-registrar",children:"https://developers.cloudflare.com/dns/nameservers/update-nameservers/#your-domain-uses-a-different-registrar"})]}),"\n",(0,r.jsx)(n.p,{children:"Below an example of the required change in case you purchased the domain through namecheap."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(8743).A+"",width:"1090",height:"847"})}),"\n",(0,r.jsx)(n.p,{children:"for that you will need to create an API token with the following permissions for your zone."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Go to Profile -> API Tokens -> Create Token -> Create Token -> Create Custom Token"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(7443).A+"",width:"1417",height:"845"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(9270).A+"",width:"1415",height:"927"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Add Permissions Zone -> Zone -> Read & Zone -> DNS -> Edit . Then select specific zone  and select your domain and press Continiue to Summary."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.img,{src:t(3071).A+"",width:"1415",height:"927"}),"\n3. Take the generated API token and place it in infisical in a new directlry called traefik. The secret name should be ",(0,r.jsx)(n.code,{children:"CF_DNS_API_TOKEN"})," and the value the token that was generated in cloudflare."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},4213:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/cloudflare-pending-activation-3f16db522dfea9b72d0388c3a54f6f4b.png"},7443:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/clouflare-create-token-1-46ff000ff07c321f4057d4cd1720841e.png"},8114:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/cloudflare-1-4a42d68f1be6faf3da3b378ab156c8e6.png"},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>i});var s=t(6540);const r={},a=s.createContext(r);function o(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(a.Provider,{value:n},e.children)}},8743:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/namecheap-ns-7079395dee016e35e5692a56362d86eb.png"},9230:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/cloudflare-dns-0884717a171809d894c8ba44024acc61.png"},9270:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/cloudflare-create-token-2-7b5a3afb2c5df183b7e6fede833bc2b8.png"}}]);