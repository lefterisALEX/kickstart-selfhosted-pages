<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Preparation/Infisical" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">External Secrets - Infisical | Cloudstack</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lefterisALEX.github.io/kickstart-selfhosted-pages/img/&lt;open-graph-card&gt;"><meta data-rh="true" name="twitter:image" content="https://lefterisALEX.github.io/kickstart-selfhosted-pages/img/&lt;open-graph-card&gt;"><meta data-rh="true" property="og:url" content="https://lefterisALEX.github.io/kickstart-selfhosted-pages/Preparation/Infisical"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="External Secrets - Infisical | Cloudstack"><meta data-rh="true" name="description" content="We are using Infisical to securely store all secrets related to your applications. Those secrets are pulled periodically (every 3 minutes) and can be used from the containers."><meta data-rh="true" property="og:description" content="We are using Infisical to securely store all secrets related to your applications. Those secrets are pulled periodically (every 3 minutes) and can be used from the containers."><link data-rh="true" rel="icon" href="/kickstart-selfhosted-pages/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lefterisALEX.github.io/kickstart-selfhosted-pages/Preparation/Infisical"><link data-rh="true" rel="alternate" href="https://lefterisALEX.github.io/kickstart-selfhosted-pages/Preparation/Infisical" hreflang="en"><link data-rh="true" rel="alternate" href="https://lefterisALEX.github.io/kickstart-selfhosted-pages/Preparation/Infisical" hreflang="x-default"><link rel="stylesheet" href="/kickstart-selfhosted-pages/assets/css/styles.76118980.css">
<script src="/kickstart-selfhosted-pages/assets/js/runtime~main.b547763f.js" defer="defer"></script>
<script src="/kickstart-selfhosted-pages/assets/js/main.9569de66.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/kickstart-selfhosted-pages/"><b class="navbar__title text--truncate">Cloustack</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" sidebarid="docsSidebar" href="/kickstart-selfhosted-pages/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lefterisALEX/kickstart-selfhosted-pages" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kickstart-selfhosted-pages/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kickstart-selfhosted-pages/how_it_works">How it works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kickstart-selfhosted-pages/costs">Costs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/kickstart-selfhosted-pages/category/preparation">Preparation</a><button aria-label="Collapse sidebar category &#x27;Preparation&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kickstart-selfhosted-pages/Preparation/Github">CICD - Github</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kickstart-selfhosted-pages/Preparation/Hetzner">Cloud Provider - Hetzner</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kickstart-selfhosted-pages/Preparation/tailscale">VPN - Tailscale</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kickstart-selfhosted-pages/Preparation/aws">Terraform state - AWS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kickstart-selfhosted-pages/Preparation/Cloudflare">DNS &amp; TLS certificates - Cloudflare/Let&#x27;s Encrypt</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/kickstart-selfhosted-pages/Preparation/Infisical">External Secrets - Infisical</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kickstart-selfhosted-pages/configuration-options">Configuration Options</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kickstart-selfhosted-pages/deploy-cloudstack">Deploy Cloudstack</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/kickstart-selfhosted-pages/category/operations">Operations</a><button aria-label="Expand sidebar category &#x27;Operations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/kickstart-selfhosted-pages/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/kickstart-selfhosted-pages/category/preparation"><span itemprop="name">Preparation</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">External Secrets - Infisical</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>External Secrets - Infisical</h1></header>
<p>We are using <a href="https://infisical.com/" target="_blank" rel="noopener noreferrer">Infisical</a> to securely store all secrets related to your applications. Those secrets are pulled periodically (every 3 minutes) and can be used from the containers.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-project">Create a Project<a href="#create-a-project" class="hash-link" aria-label="Direct link to Create a Project" title="Direct link to Create a Project">​</a></h2>
<p>First thing is that we need to create a new project and save the project ID as github secret with name <code>INFISICAL_PROJECT_ID</code>
<img decoding="async" loading="lazy" src="/kickstart-selfhosted-pages/assets/images/infisical-project-id-8e30279cbc39cf7b26a77e3873d8ebb4.png" width="1638" height="919" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-identity">Create Identity<a href="#create-identity" class="hash-link" aria-label="Direct link to Create Identity" title="Direct link to Create Identity">​</a></h2>
<p>Navigate to <code>Admin</code> -&gt; <code>Access Control</code> -&gt; <code>Identities</code> .<br>
<!-- -->Press <strong>&quot;Create Identity&quot;</strong> and select as <strong>&quot;Member&quot;</strong> as Role
<img decoding="async" loading="lazy" src="/kickstart-selfhosted-pages/assets/images/infisical-create-identity-3339ad9d7ba485e20c35a1fa371c0b8b.png" width="1638" height="919" class="img_ev3q"></p>
<p>Then press <code>Universal Auth</code> and after press <code>Add client secret</code> , give it a name and press <strong>&quot;Create&quot;</strong>. Save the generated client secret as github secret with name <code>INFISICAL_CLIENT_SECRET</code>
<img decoding="async" loading="lazy" src="/kickstart-selfhosted-pages/assets/images/infisical-universal-auth-697ed9dc488f9bd34908672001589876.png" width="1631" height="919" class="img_ev3q">
<img decoding="async" loading="lazy" src="/kickstart-selfhosted-pages/assets/images/infisical-add-client-secret-ee5b47cb5d129e8bbfaebc18583d9d79.png" width="1631" height="919" class="img_ev3q">
<img decoding="async" loading="lazy" src="/kickstart-selfhosted-pages/assets/images/infisical-create-client-secret-5a097144cc22f30e5ba6bcfddd10dc92.png" width="1631" height="919" class="img_ev3q"></p>
<p>Copy the <code>Client ID</code> and save it as github secret with name <code>INFISICAL_CLIENT_ID</code><br>
<img decoding="async" loading="lazy" src="/kickstart-selfhosted-pages/assets/images/infisical-client-id-10b9455e908d5f313a70e280a5394a4a.png" width="1631" height="919" class="img_ev3q"></p>
<p>Now you should have 3 new secrets stored in github related with Infisical.</p>
<p><img decoding="async" loading="lazy" src="/kickstart-selfhosted-pages/assets/images/github-infisical-client-secret-a5cb33490cf0a7a352708ea09a744537.png" width="1631" height="919" class="img_ev3q"></p>
<p>Lastly assign the new identity as Project Viewer
<img decoding="async" loading="lazy" src="/kickstart-selfhosted-pages/assets/images/infisical-project-1-1eabfee1b67781aad8034c808e53e921.png" width="1631" height="919" class="img_ev3q">
<img decoding="async" loading="lazy" src="/kickstart-selfhosted-pages/assets/images/infisical-project-2-046666f80f3ab62a49b0a7ada396efdd.png" width="1631" height="919" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-secrets">Add secrets<a href="#add-secrets" class="hash-link" aria-label="Direct link to Add secrets" title="Direct link to Add secrets">​</a></h2>
<p>Is important first to understand how the secrets are copied in to the VPS first.<br>
<!-- -->Below a structure of the folder containers our applications.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── docker-compose.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── adguard</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   └── docker-compose.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── docker-backup</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   └── docker-compose.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── traefik</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   └── docker-compose.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└── uptime</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    └── docker-compose.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this structure there is a main <code>docker-compose.yaml</code> file which is used to configure:</p>
<ol>
<li>Which other <code>docker-compose.yaml</code> files should be included, so in other words which other services should be enabled.</li>
<li>The docker network name and subnet.</li>
</ol>
<p>example of a root docker-compose.yaml file</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">version: &quot;3&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">include:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - ./traefik/docker-compose.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - ./docker-backup/docker-compose.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - ./dashy/docker-compose.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - ./uptime/docker-compose.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">networks:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  private_network:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name: private_network</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    driver: bridge</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ipam:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      config:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        - subnet: 172.29.1.0/24</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>All applications then have their own dedicated  <code>docker-compose.yaml</code> file under a specific directory.<br>
<!-- -->For instance for the traefik application the <code>docker-compose.yaml</code> is the <code>traefik/docker-compose.yaml</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">version: &quot;3.8&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">name: traefik</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  traefik:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: traefik:v3.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    container_name: traefik</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - 80:80</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - 443:443</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - 8080:8080</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      private_network:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    env_file:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - .secrets</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - /var/run/docker.sock:/var/run/docker.sock:ro</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - /mnt/data/traefik/letsencrypt:/letsencrypt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    command:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;--api=true&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;--api.dashboard=true&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;--providers.docker=true&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;--providers.docker.exposedbydefault=false&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;--entrypoints.web.address=:80&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;--entrypoints.websecure.address=:443&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;--entrypoints.web.http.redirections.entryPoint.to=websecure&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;--certificatesresolvers.letsencrypt.acme.dnschallenge=true&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;--certificatesresolvers.letsencrypt.acme.dnschallenge.provider=cloudflare&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;--certificatesresolvers.letsencrypt.acme.email=${EMAIL}&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;--certificatesresolvers.letsencrypt.acme.storage=/letsencrypt/acme.json&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    labels:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;traefik.enable=true&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;traefik.http.routers.dashboard.entrypoints=websecure&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;traefik.http.routers.dashboard.tls.certresolver=letsencrypt&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;traefik.http.routers.dashboard.rule=Host(`dashboard.${DOMAIN}`) &amp;&amp; (PathPrefix(`/api`) || PathPrefix(`/dashboard`))&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;traefik.http.routers.dashboard.service=api@internal&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    restart: always</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="application-specific-secrets">Application specific secrets<a href="#application-specific-secrets" class="hash-link" aria-label="Direct link to Application specific secrets" title="Direct link to Application specific secrets">​</a></h3>
<p>In the above <code>docker-compose.yaml</code> for traefik we see that there are some environment variables used, <code>${DOMAIN}</code> and <code>${EMAIL}</code> . There is also a <code>env_file</code> read from the file <code>.secrets</code>.
The way how it works is that when the deployr script is executed is going to pull all secrets from infisical and place them under the same directory as defined in infisical.<br>
<!-- -->So all secrets stored in infisical under the directory traefik, are going to be copied to the file <code>./traefik/.secrets</code> and thus available to the containers traefik as defined in <code>./traefik/docker-compose.yaml</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-variables">Common variables<a href="#common-variables" class="hash-link" aria-label="Direct link to Common variables" title="Direct link to Common variables">​</a></h3>
<p>In addition any secrets stored in the root directory in infisical will be available as variables accross all containers.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/kickstart-selfhosted-pages/Preparation/Cloudflare"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">DNS &amp; TLS certificates - Cloudflare/Let&#x27;s Encrypt</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/kickstart-selfhosted-pages/configuration-options"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Configuration Options</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-a-project" class="table-of-contents__link toc-highlight">Create a Project</a></li><li><a href="#create-identity" class="table-of-contents__link toc-highlight">Create Identity</a></li><li><a href="#add-secrets" class="table-of-contents__link toc-highlight">Add secrets</a><ul><li><a href="#application-specific-secrets" class="table-of-contents__link toc-highlight">Application specific secrets</a></li><li><a href="#common-variables" class="table-of-contents__link toc-highlight">Common variables</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>